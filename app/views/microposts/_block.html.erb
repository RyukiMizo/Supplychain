<% block_count = @blocks.count %>

<% block_count.times do |n| %>

  <% if @blocks[n] %>
  <div class="basic-block">
  
    <div class="block-infom">
    <div id="place-<%= n %>">
      <%= @blocks[n].place %>
    </div>
    <div id="date-<%= n %>">
      <%= @blocks[n].date %><br>
    </div>
    </div>
    
    <div class="block-user">
      <% post = Micropost.find_by(id: @blocks[n].micropost_id) %>
      <% user = User.find_by(id: post.user_id) %>
      <%= image_tag user.thumbnail.url, :size => '47x47' if user.thumbnail? %>
      <%= link_to user.name, user_path(user) %>
    </div>
    
  </div>
    
    <div id="block-inf-<%= n %>">
      <div class="picture-n">
        <%= image_tag @blocks[n].picture.url, class:'img-n' if @blocks[n].picture? %>
        <div id="inf-<%= n %>">
        <%= simple_format(@blocks[n].information) %>
        </div>
      </div>
    

    </div>
    
      <% if @blocks[n] != @blocks.last %>
        |<br>
        |<br>
        |<br>
        |<br>
      <% end %>
    <% end %>
<% end %>

<!-- 上でblockは終わり。下からはchainとその中のdeepchainを記述していく。 -->

<% if @chains.present? %>
<%= render 'microposts/chain' %>

<% end %>



